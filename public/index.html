<html>
<head>
  <title>first to click</title>
  <style>
  @-webkit-keyframes colours {
  	  0% {background-color: #FDEE00;}
  	 25% {background-color: #FBEC5D;}
  	 50% {background-color: #FFFF00;}
  	 75% {background-color: #FFD800;}
  	 100% {background-color: #FDEE00;}
  }
  #flashingBg, #redFlash {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
  }
  #flashingBg {
  	-webkit-animation-direction: normal;
  	-webkit-animation-duration: 1s;
  	-webkit-animation-iteration-count: infinite;
  	-webkit-animation-name: colours;
  	-webkit-animation-timing-function: linear;
  }
  #redFlash {
    background-color: red;
  }
  </style>
  <script>
  if (!Date.now) {
      Date.now = function() { return new Date().getTime(); }
  }

  var waitingForClick = false
  var flashTime, clickTime, responseLength;

  document.onclick = function(e) {
    if (waitingForClick) {
      clickTime = Date.now();
      console.log(clickTime);
      console.log(clickTime - flashTime);
      waitingForClick = false;
    }
  }

  function r(f){/in/.test(document.readyState)?setTimeout(r,9,f):f()}
  r(function(){

    // ready


    var socket = io.connect(window.location.hostname + ":" + window.location.port);
    socket.on('flash', function() {
      document.getElementById('redFlash').style.display = 'block';
      document.getElementById('flashingBg').style.display = 'none';
      flashTime = Date.now();
      console.log(flashTime);
      waitingForClick = true;
    });

  });

  </script>
</head>
<body>
  <div id="flashingBg"></div>
  <div id="redFlash"></div>

  <!-- javascript includes -->
  <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
</body>
</html>
